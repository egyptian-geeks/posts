---
message: |-
  Hello geeks,

  I have a project that requires data transfer between a desktop application written  with node-webkit and another application written in C#.

  The communication will be done throw files ( A file written by either of them is read using the other )

  the data must be encrypted in files. We use AES-256-CBC.

  The problem is that the resulting string from the 2 parties are not identical when using the same key and IV.

  Any one has any knowledge in this or has a working example ?

  I can provide codes if you want.

  Thank you
from:
  name: Mahmoud Abd El-Fattah
  id: '10156358805885288'
type: status
created_time: '2015-02-11T10:54:59+0000'
updated_time: '2015-02-12T17:54:47+0000'
permalink_url: https://www.facebook.com/groups/egyptian.geeks/permalink/893764397329936/
id: '172338516139198_893764397329936'
comments:
  data:
  - created_time: '2015-02-11T10:56:43+0000'
    from:
      name: Emad Elsaid
      id: '627907956'
    message: Humm, can you post some code?
    id: '893764823996560'
  - created_time: '2015-02-11T10:56:59+0000'
    from:
      name: Amr Hussien
      id: '1013120235493556'
    message: Mustafa Hammad you can help ?
    id: '893764887329887'
  - created_time: '2015-02-11T11:05:13+0000'
    from:
      name: Mahmoud Abd El-Fattah
      id: '10156358805885288'
    message: 'here is the code: http://justpaste.it/jcxg'
    id: '893766847329691'
  - created_time: '2015-02-11T11:09:34+0000'
    from:
      name: Mahmoud Abd El-Fattah
      id: '10156358805885288'
    message: I forgot to say that I have googled it and tried so many solutions with
      no success
    id: '893768200662889'
  - created_time: '2015-02-11T11:27:22+0000'
    from:
      name: Moustafa Abdelaziz
      id: '10156095976664136'
    message: Amr Hussien I'm afraid that I cannot help cause I'm not really familiar
      with neither C# nor node.js =)
    id: '893772193995823'
  - created_time: '2015-02-11T11:34:47+0000'
    from:
      name: Sabr Bry
      id: '10203807938637084'
    message: try to figure out where is the problem, for example encrypt small string
      on both c# & node and compare it, if they are the same then it might be something
      with the file saving and reading ..etc it could be as simple as extra \r\n
    id: '893773747329001'
  - created_time: '2015-02-11T11:35:47+0000'
    from:
      name: Mahmoud Abd El-Fattah
      id: '10156358805885288'
    message: This is what I have done in the example above. I have tried Hello world
      string and the output is not the same
    id: '893773937328982'
  - created_time: '2015-02-11T11:37:38+0000'
    from:
      name: Ahmed Ezz
      id: '10155853377281955'
    message: For me, i will check first which is wrong so i dig into it. to do that,
      use any online encryption method and check which is correct and which is wrong,
      use http://aes.online-domain-tools.com/ for example.
    id: '893774337328942'
  - created_time: '2015-02-11T11:37:43+0000'
    from:
      name: Mohamed Samy
      id: '10160396852830355'
    message: Mahmoud Abd El-Fattah are the 2 machines different?
    id: '893774353995607'
  - created_time: '2015-02-11T11:38:00+0000'
    from:
      name: Mohamed Samy
      id: '10160396852830355'
    message: i mean the 2 apps running in different machines?
    id: '893774410662268'
  - created_time: '2015-02-11T11:38:21+0000'
    from:
      name: Mohamed Samy
      id: '10160396852830355'
    message: Why not use a database to share data
    id: '893774467328929'
  - created_time: '2015-02-11T11:38:28+0000'
    from:
      name: Mahmoud Abd El-Fattah
      id: '10156358805885288'
    message: no, on the same machine
    id: '893774480662261'
  - created_time: '2015-02-11T11:38:33+0000'
    from:
      name: Mohamed Samy
      id: '10160396852830355'
    message: the DB can handle teh security and encryption
    id: '893774507328925'
  - created_time: '2015-02-11T11:38:51+0000'
    from:
      name: Mahmoud Abd El-Fattah
      id: '10156358805885288'
    message: A database can't be used
    id: '893774613995581'
  - created_time: '2015-02-11T11:39:32+0000'
    from:
      name: Mahmoud Abd El-Fattah
      id: '10156358805885288'
    message: This is an already built solution that need security applied between
      the 2 apps
    id: '893774747328901'
  - created_time: '2015-02-11T11:39:57+0000'
    from:
      name: Mohamed Samy
      id: '10160396852830355'
    message: the use a communications protocol WCF
    id: '893774830662226'
  - created_time: '2015-02-11T11:40:28+0000'
    from:
      name: Mahmoud Abd El-Fattah
      id: '10156358805885288'
    message: The whole application is built on files.... I can't change this
    id: '893775060662203'
  - created_time: '2015-02-11T11:41:36+0000'
    from:
      name: Ahmed Ezz
      id: '10155853377281955'
    message: yabny, 3malt el check dah ?
    id: '893775273995515'
  - created_time: '2015-02-11T11:42:23+0000'
    from:
      name: Ahmed Ezz
      id: '10155853377281955'
    message: on binary level first
    id: '893775377328838'
  - created_time: '2015-02-11T11:42:44+0000'
    from:
      name: Mahmoud Abd El-Fattah
      id: '10156358805885288'
    message: doing it now
    id: '893775457328830'
  - created_time: '2015-02-11T11:42:54+0000'
    from:
      name: Mohamed Samy
      id: '10160396852830355'
    message: ok, understood, one of those, change the least amount possible Ahmed
      Ezz El-Din seems to be in right track
    id: '893775493995493'
  - created_time: '2015-02-11T11:47:56+0000'
    from:
      name: Ahmed Ezz
      id: '10155853377281955'
    message: bardo, Ahmed E. Naiem best one i know who can help in this, after checking
      which is the wrong code.
    id: '893776447328731'
  - created_time: '2015-02-11T11:49:18+0000'
    from:
      name: Mahmoud Abd El-Fattah
      id: '10156358805885288'
    message: The problem is that I can decrypt back the encrypted string in both sides
      successfully
    id: '893776830662026'
  - created_time: '2015-02-11T11:54:40+0000'
    from:
      name: Mahmoud Abd El-Fattah
      id: '10156358805885288'
    message: I got it working
    id: '893778020661907'
  - created_time: '2015-02-11T11:54:44+0000'
    from:
      name: Mahmoud Abd El-Fattah
      id: '10156358805885288'
    message: Thank you so much guys
    id: '893778033995239'
  - created_time: '2015-02-11T11:55:07+0000'
    from:
      name: Mahmoud Abd El-Fattah
      id: '10156358805885288'
    message: The problem was on node js side
    id: '893778107328565'
  - created_time: '2015-02-11T11:55:23+0000'
    from:
      name: Mahmoud Abd El-Fattah
      id: '10156358805885288'
    message: it needed the key in binary but did not object it being string
    id: '893778147328561'
  - created_time: '2015-02-11T11:55:51+0000'
    from:
      name: Mohamed Samy
      id: '10160396852830355'
    message: Mahmoud Abd El-Fattah why build a windows app in node JS? not windows
      forms?
    id: '893778220661887'
  - created_time: '2015-02-11T12:12:55+0000'
    from:
      name: Mahmoud Abd El-Fattah
      id: '10156358805885288'
    message: I'm not the one who built it :D   they needed a lot of multimedia, so
      they decided to go for node-webkit
    id: '893782827328093'
  - created_time: '2015-02-11T12:19:44+0000'
    from:
      name: Mohamed Samy
      id: '10160396852830355'
    message: Javascript for a windows app? sounds like a bad decision to me :)
    id: '893784633994579'
  - created_time: '2015-02-11T13:21:13+0000'
    from:
      name: Ahmed Essam
      id: '10155245211207653'
    message: |-
      node-webkit is for the browser ability and the open source nature.

      Node-Webkit is mix of Google V8 and Apple Webkit, both hate each other and both are doing good in certain parts, so it make much sense to use the good thing here and the good thing there, it end up with Node-Webkit

      The problem I guess is the inconsistency of nodeJS, sometimes libraries and implementations are different which fuck up many thigns.
    id: '893801443992898'
  - created_time: '2015-02-12T17:00:22+0000'
    from:
      name: Ahmed Ibrahim
      id: '1736169696403132'
    message: what about creating your own encryption method
    id: '894305683942474'
  - created_time: '2015-02-12T17:42:34+0000'
    from:
      name: Sabr Bry
      id: '10203807938637084'
    message: |-
      Ahmed Ibrahim really ?!!!

      "don't reinvent the wheel"
    id: '894317240607985'
  - created_time: '2015-02-12T17:54:47+0000'
    from:
      name: Ahmed Ibrahim
      id: '1736169696403132'
    message: i thought it might solve the problem, you don't need to make a sophisticated
      one , a simple one that returns the same result
    id: '894320480607661'
  paging:
    cursors:
      before: WTI5dGJXVnVkRjlqZAFhKemIzSTZAPRGt6TnpZAME9ESXpPVGsyTlRZAd09qRTBNak0yTlRJeU1ETT0ZD
      after: WTI5dGJXVnVkRjlqZAFhKemIzSTZAPRGswTXpJd05EZA3dOakEzTmpZAeE9qRTBNak0zTmpNMk9EYz0ZD
